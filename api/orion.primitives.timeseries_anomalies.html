

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>orion.primitives.timeseries_anomalies module &mdash; Orion 0.1.3.dev1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="orion.analysis module" href="orion.analysis.html" />
    <link rel="prev" title="orion.primitives.tadgan module" href="orion.primitives.tadgan.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Orion
          

          
            
            <img src="../_static/orion-logo-white-200.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Orion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#overview">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#leaderboard">Leaderboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#table-of-contents">Table of Contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#data-format">Data Format</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#input">Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#output">Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#dataset-we-use-in-this-library">Dataset we use in this library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#orion-pipelines">Orion Pipelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#current-available-pipelines">Current Available Pipelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#install">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#requirements">Requirements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../readme.html#python">Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../readme.html#mongodb">MongoDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#install-with-pip">Install with pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#docker">Docker</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#quickstart">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#load-the-data">1. Load the data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#detect-anomalies-using-orion">2. Detect anomalies using Orion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../readme.html#evaluate-the-performance-of-your-pipeline">3. Evaluate the performance of your pipeline</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#database">Database</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../benchmark.html">Benchmark</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../benchmark.html#data-used-for-the-scoring">Data used for the scoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../benchmark.html#calculating-a-score">Calculating a Score</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../benchmark.html#scoring-input">Scoring Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../benchmark.html#scoring-process-reformat-as-labels-with-weights">Scoring process: Reformat as labels with weights</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../benchmark.html#evaluating-the-pipelines">Evaluating the Pipelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../benchmark.html#evaluate-function">Evaluate function</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../database.html">Database Schema</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../database.html#dataset">Dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#fields">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#signal">Signal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id1">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#template">Template</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id2">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#pipeline">Pipeline</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id3">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#experiment">Experiment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id4">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#datarun">Datarun</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id5">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#signalrun">Signalrun</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id6">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#event">Event</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id7">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#event-interaction">Event Interaction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id8">Fields</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../database.html#annotation">Annotation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../database.html#id9">Fields</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../docker.html#docker-requirements">Docker Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker.html#building-the-orion-docker-image">Building the Orion Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../docker.html#distributing-the-orion-docker-image">Distributing the Orion Docker Image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../docker.html#distributing-using-a-docker-registry">Distributing using a Docker registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../docker.html#distributing-as-a-file">Distributing as a file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../docker.html#running-the-orion-jupyter-image">Running the orion-jupyter image</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../docker.html#running-orion-jupyter-with-the-code">Running orion-jupyter with the code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../docker.html#running-orion-jupyter-without-the-orion-code">Running orion-jupyter without the orion code</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="orion.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="orion.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="orion.db.html">orion.db package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="orion.db.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="orion.evaluation.html">orion.evaluation package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="orion.evaluation.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="orion.primitives.html">orion.primitives package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="orion.primitives.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="orion.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="orion.analysis.html">orion.analysis module</a></li>
<li class="toctree-l3"><a class="reference internal" href="orion.benchmark.html">orion.benchmark module</a></li>
<li class="toctree-l3"><a class="reference internal" href="orion.cli.html">orion.cli module</a></li>
<li class="toctree-l3"><a class="reference internal" href="orion.core.html">orion.core module</a></li>
<li class="toctree-l3"><a class="reference internal" href="orion.data.html">orion.data module</a></li>
<li class="toctree-l3"><a class="reference internal" href="orion.functional.html">orion.functional module</a></li>
<li class="toctree-l3"><a class="reference internal" href="orion.runner.html">orion.runner module</a></li>
<li class="toctree-l3"><a class="reference internal" href="orion.utils.html">orion.utils module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#types-of-contributions">Types of Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#report-bugs">Report Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#fix-bugs">Fix Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#implement-features">Implement Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#write-documentation">Write Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#submit-feedback">Submit Feedback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#unit-testing-guidelines">Unit Testing Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#tips">Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#release-workflow">Release Workflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../history.html">History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../history.html#id1">0.1.2 - 2020-07-03</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#id2">0.1.1 - 2020-05-11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../history.html#id3">0.1.0 - 2020-04-23</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Orion</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="orion.html">orion package</a> &raquo;</li>
        
          <li><a href="orion.primitives.html">orion.primitives package</a> &raquo;</li>
        
      <li>orion.primitives.timeseries_anomalies module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/D3-AI/Orion/blob/master/docs/api/orion.primitives.timeseries_anomalies.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-orion.primitives.timeseries_anomalies">
<span id="orion-primitives-timeseries-anomalies-module"></span><h1>orion.primitives.timeseries_anomalies module<a class="headerlink" href="#module-orion.primitives.timeseries_anomalies" title="Permalink to this headline">¶</a></h1>
<p>Time Series anomaly detection functions.
Implementation inspired by the paper <a class="reference external" href="https://arxiv.org/pdf/1802.04431.pdf">https://arxiv.org/pdf/1802.04431.pdf</a></p>
<dl class="function">
<dt id="orion.primitives.timeseries_anomalies.count_above">
<code class="sig-prename descclassname">orion.primitives.timeseries_anomalies.</code><code class="sig-name descname">count_above</code><span class="sig-paren">(</span><em class="sig-param">errors</em>, <em class="sig-param">epsilon</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orion/primitives/timeseries_anomalies.html#count_above"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orion.primitives.timeseries_anomalies.count_above" title="Permalink to this definition">¶</a></dt>
<dd><p>Count number of errors and continuous sequences above epsilon.</p>
<p>Continuous sequences are counted by shifting and counting the number
of positions where there was a change and the original value was true,
which means that a sequence started at that position.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>errors</strong> (<em>ndarray</em>) – Array of errors.</p></li>
<li><p><strong>epsilon</strong> (<em>ndarray</em>) – Threshold value.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>Number of errors above epsilon.</p></li>
<li><p>Number of continuous sequences above epsilon.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int, int</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="orion.primitives.timeseries_anomalies.deltas">
<code class="sig-prename descclassname">orion.primitives.timeseries_anomalies.</code><code class="sig-name descname">deltas</code><span class="sig-paren">(</span><em class="sig-param">errors</em>, <em class="sig-param">epsilon</em>, <em class="sig-param">mean</em>, <em class="sig-param">std</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orion/primitives/timeseries_anomalies.html#deltas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orion.primitives.timeseries_anomalies.deltas" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute mean and std deltas.</p>
<p>delta_mean = mean(errors) - mean(all errors below epsilon)
delta_std = std(errors) - std(all errors below epsilon)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>errors</strong> (<em>ndarray</em>) – Array of errors.</p></li>
<li><p><strong>epsilon</strong> (<em>ndarray</em>) – Threshold value.</p></li>
<li><p><strong>mean</strong> (<em>float</em>) – Mean of errors.</p></li>
<li><p><strong>std</strong> (<em>float</em>) – Standard deviation of errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>delta_mean.</p></li>
<li><p>delta_std.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float, float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="orion.primitives.timeseries_anomalies.find_anomalies">
<code class="sig-prename descclassname">orion.primitives.timeseries_anomalies.</code><code class="sig-name descname">find_anomalies</code><span class="sig-paren">(</span><em class="sig-param">errors</em>, <em class="sig-param">index</em>, <em class="sig-param">z_range=(0</em>, <em class="sig-param">10)</em>, <em class="sig-param">window_size=None</em>, <em class="sig-param">window_size_portion=None</em>, <em class="sig-param">window_step_size=None</em>, <em class="sig-param">window_step_size_portion=None</em>, <em class="sig-param">min_percent=0.1</em>, <em class="sig-param">anomaly_padding=50</em>, <em class="sig-param">lower_threshold=False</em>, <em class="sig-param">fixed_threshold=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orion/primitives/timeseries_anomalies.html#find_anomalies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orion.primitives.timeseries_anomalies.find_anomalies" title="Permalink to this definition">¶</a></dt>
<dd><p>Find sequences of error values that are anomalous.</p>
<p>We first define the window of errors, that we want to analyze. We then find the anomalous
sequences in that window and store the start/stop index pairs that correspond to each
sequence, along with its score. Optionally, we can flip the error sequence around the mean
and apply the same procedure, allowing us to find unusually low error sequences.
We then move the window and repeat the procedure.
Lastly, we combine overlapping or consecutive sequences.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>errors</strong> (<em>ndarray</em>) – Array of errors.</p></li>
<li><p><strong>index</strong> (<em>ndarray</em>) – Array of indices of the errors.</p></li>
<li><p><strong>z_range</strong> (<em>list</em>) – Optional. List of two values denoting the range out of which the start points for
the scipy.fmin function are chosen. If not given, (0, 10) is used.</p></li>
<li><p><strong>window_size</strong> (<em>int</em>) – Optional. Size of the window for which a threshold is calculated. If not given,
<cite>None</cite> is used, which finds one threshold for the entire sequence of errors.</p></li>
<li><p><strong>window_size_portion</strong> (<em>float</em>) – Optional. Specify the size of the window to be a portion of the sequence of errors.
If not given, <cite>None</cite> is used, and window size is used as is.</p></li>
<li><p><strong>window_step_size</strong> (<em>int</em>) – Optional. Number of steps the window is moved before another threshold is
calculated for the new window.</p></li>
<li><p><strong>window_step_size_portion</strong> (<em>float</em>) – Optional. Specify the number of steps to be a portion of the window size. If not given,
<cite>None</cite> is used, and window step size is used as is.</p></li>
<li><p><strong>min_percent</strong> (<em>float</em>) – Optional. Percentage of separation the anomalies need to meet between themselves and
the highest non-anomalous error in the window sequence. It nof given, 0.1 is used.</p></li>
<li><p><strong>anomaly_padding</strong> (<em>int</em>) – Optional. Number of errors before and after a found anomaly that are added to the
anomalous sequence. If not given, 50 is used.</p></li>
<li><p><strong>lower_threshold</strong> (<em>bool</em>) – Optional. Indicates whether to apply a lower threshold to find unusually low errors.
If not given, <cite>False</cite> is used.</p></li>
<li><p><strong>fixed_threshold</strong> (<em>bool</em>) – Optional. Indicates whether to use fixed threshold or dynamic threshold. If not
given, <cite>False</cite> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array containing start-index, end-index, score for each anomalous sequence that
was found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="orion.primitives.timeseries_anomalies.regression_errors">
<code class="sig-prename descclassname">orion.primitives.timeseries_anomalies.</code><code class="sig-name descname">regression_errors</code><span class="sig-paren">(</span><em class="sig-param">y</em>, <em class="sig-param">y_hat</em>, <em class="sig-param">smoothing_window=0.01</em>, <em class="sig-param">smooth=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orion/primitives/timeseries_anomalies.html#regression_errors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orion.primitives.timeseries_anomalies.regression_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute an array of absolute errors comparing predictions and expected output.</p>
<p>If smooth is True, apply EWMA to the resulting array of errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>y</strong> (<em>ndarray</em>) – Ground truth.</p></li>
<li><p><strong>y_hat</strong> (<em>ndarray</em>) – Predicted values.</p></li>
<li><p><strong>smoothing_window</strong> (<em>float</em>) – Optional. Size of the smoothing window, expressed as a proportion of the total
length of y. If not given, 0.01 is used.</p></li>
<li><p><strong>smooth</strong> (<em>bool</em>) – Optional. Indicates whether the returned errors should be smoothed with EWMA.
If not given, <cite>True</cite> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of errors.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="orion.primitives.timeseries_anomalies.z_cost">
<code class="sig-prename descclassname">orion.primitives.timeseries_anomalies.</code><code class="sig-name descname">z_cost</code><span class="sig-paren">(</span><em class="sig-param">z</em>, <em class="sig-param">errors</em>, <em class="sig-param">mean</em>, <em class="sig-param">std</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/orion/primitives/timeseries_anomalies.html#z_cost"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orion.primitives.timeseries_anomalies.z_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute how bad a z value is.</p>
<p>The original formula is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>         <span class="p">(</span><span class="n">delta_mean</span><span class="o">/</span><span class="n">mean</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">delta_std</span><span class="o">/</span><span class="n">std</span><span class="p">)</span>
<span class="o">------------------------------------------------------</span>
<span class="n">number</span> <span class="n">of</span> <span class="n">errors</span> <span class="n">above</span> <span class="o">+</span> <span class="p">(</span><span class="n">number</span> <span class="n">of</span> <span class="n">sequences</span> <span class="n">above</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
<p>which computes the “goodness” of <cite>z</cite>, meaning that the higher the value
the better the <cite>z</cite>.</p>
<p>In this case, we return this value inverted (we make it negative), to convert
it into a cost function, as later on we will use scipy.fmin to minimize it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>z</strong> (<em>ndarray</em>) – Value for which a cost score is calculated.</p></li>
<li><p><strong>errors</strong> (<em>ndarray</em>) – Array of errors.</p></li>
<li><p><strong>mean</strong> (<em>float</em>) – Mean of errors.</p></li>
<li><p><strong>std</strong> (<em>float</em>) – Standard deviation of errors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Cost of z.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="orion.analysis.html" class="btn btn-neutral float-right" title="orion.analysis module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="orion.primitives.tadgan.html" class="btn btn-neutral float-left" title="orion.primitives.tadgan module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, MIT Data To AI Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>