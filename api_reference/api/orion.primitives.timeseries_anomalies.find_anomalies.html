
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>orion.primitives.timeseries_anomalies.find_anomalies &#8212; Orion 0.1.7.dev0 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.f6b7ca918bee2f46fd9abac01cfb07d5.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1e043a052b0af929e4d8.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="orion.primitives.azure_anomaly_detector.split_sequence" href="orion.primitives.azure_anomaly_detector.split_sequence.html" />
    <link rel="prev" title="orion.primitives.timeseries_errors.reconstruction_errors" href="orion.primitives.timeseries_errors.reconstruction_errors.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">


    
    <a class="navbar-brand" href="../../index.html">
      <p class="title">Orion</p>
    </a>
    

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../getting_started/index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../user_guides/index.html">
  User Guides
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../developer_guides/index.html">
  Developer Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../history.html">
  Release Notes
 </a>
</li>

        
      </ul>

      <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/signals-dev/Orion" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l2">
  <a class="reference internal" href="../orion.html">
   orion
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../evaluation.html">
   orion.evaluation
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference internal" href="../db.html">
   orion.db
  </a>
 </li>
 <li class="toctree-l2 current active">
  <a class="reference internal" href="../prim.html">
   orion.primitives
  </a>
  <ul class="current">
   <li class="toctree-l3">
    <a class="reference internal" href="orion.primitives.tadgan.TadGAN.html">
     orion.primitives.tadgan.TadGAN
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="orion.primitives.tadgan.score_anomalies.html">
     orion.primitives.tadgan.score_anomalies
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="orion.primitives.timeseries_preprocessing.fillna.html">
     orion.primitives.timeseries_preprocessing.fillna
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="orion.primitives.timeseries_errors.regression_errors.html">
     orion.primitives.timeseries_errors.regression_errors
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="orion.primitives.timeseries_errors.reconstruction_errors.html">
     orion.primitives.timeseries_errors.reconstruction_errors
    </a>
   </li>
   <li class="toctree-l3 current active">
    <a class="current reference internal" href="#">
     orion.primitives.timeseries_anomalies.find_anomalies
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="orion.primitives.azure_anomaly_detector.split_sequence.html">
     orion.primitives.azure_anomaly_detector.split_sequence
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="orion.primitives.azure_anomaly_detector.detect_anomalies.html">
     orion.primitives.azure_anomaly_detector.detect_anomalies
    </a>
   </li>
  </ul>
 </li>
</ul>
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              

<nav id="bd-toc-nav">
    
</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="orion-primitives-timeseries-anomalies-find-anomalies">
<h1>orion.primitives.timeseries_anomalies.find_anomalies<a class="headerlink" href="#orion-primitives-timeseries-anomalies-find-anomalies" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="orion.primitives.timeseries_anomalies.find_anomalies">
<code class="sig-prename descclassname">orion.primitives.timeseries_anomalies.</code><code class="sig-name descname">find_anomalies</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">errors</span></em>, <em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">z_range</span><span class="o">=</span><span class="default_value">0, 10</span></em>, <em class="sig-param"><span class="n">window_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">window_size_portion</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">window_step_size</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">window_step_size_portion</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">min_percent</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">anomaly_padding</span><span class="o">=</span><span class="default_value">50</span></em>, <em class="sig-param"><span class="n">lower_threshold</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">fixed_threshold</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/orion/primitives/timeseries_anomalies.html#find_anomalies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#orion.primitives.timeseries_anomalies.find_anomalies" title="Permalink to this definition">¶</a></dt>
<dd><p>Find sequences of error values that are anomalous.</p>
<p>We first define the window of errors, that we want to analyze. We then find the anomalous
sequences in that window and store the start/stop index pairs that correspond to each
sequence, along with its score. Optionally, we can flip the error sequence around the mean
and apply the same procedure, allowing us to find unusually low error sequences.
We then move the window and repeat the procedure.
Lastly, we combine overlapping or consecutive sequences.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>errors</strong> (<em>ndarray</em>) – Array of errors.</p></li>
<li><p><strong>index</strong> (<em>ndarray</em>) – Array of indices of the errors.</p></li>
<li><p><strong>z_range</strong> (<em>list</em>) – Optional. List of two values denoting the range out of which the start points for
the scipy.fmin function are chosen. If not given, (0, 10) is used.</p></li>
<li><p><strong>window_size</strong> (<em>int</em>) – Optional. Size of the window for which a threshold is calculated. If not given,
<cite>None</cite> is used, which finds one threshold for the entire sequence of errors.</p></li>
<li><p><strong>window_size_portion</strong> (<em>float</em>) – Optional. Specify the size of the window to be a portion of the sequence of errors.
If not given, <cite>None</cite> is used, and window size is used as is.</p></li>
<li><p><strong>window_step_size</strong> (<em>int</em>) – Optional. Number of steps the window is moved before another threshold is
calculated for the new window.</p></li>
<li><p><strong>window_step_size_portion</strong> (<em>float</em>) – Optional. Specify the number of steps to be a portion of the window size. If not given,
<cite>None</cite> is used, and window step size is used as is.</p></li>
<li><p><strong>min_percent</strong> (<em>float</em>) – Optional. Percentage of separation the anomalies need to meet between themselves and
the highest non-anomalous error in the window sequence. It nof given, 0.1 is used.</p></li>
<li><p><strong>anomaly_padding</strong> (<em>int</em>) – Optional. Number of errors before and after a found anomaly that are added to the
anomalous sequence. If not given, 50 is used.</p></li>
<li><p><strong>lower_threshold</strong> (<em>bool</em>) – Optional. Indicates whether to apply a lower threshold to find unusually low errors.
If not given, <cite>False</cite> is used.</p></li>
<li><p><strong>fixed_threshold</strong> (<em>bool</em>) – Optional. Indicates whether to use fixed threshold or dynamic threshold. If not
given, <cite>False</cite> is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array containing start-index, end-index, score for each anomalous sequence that
was found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
</dd></dl>

</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="orion.primitives.timeseries_errors.reconstruction_errors.html" title="previous page">orion.primitives.timeseries_errors.reconstruction_errors</a>
    <a class='right-next' id="next-link" href="orion.primitives.azure_anomaly_detector.split_sequence.html" title="next page">orion.primitives.azure_anomaly_detector.split_sequence</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.1e043a052b0af929e4d8.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018, MIT Data To AI Lab.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>